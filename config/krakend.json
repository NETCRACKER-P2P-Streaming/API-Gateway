{
  "version": 2,
  "name": "{{ .service.name }}",
  "port": {{ .service.port }},
  "extra_config": {{ marshal .service.extra_config }},
  "endpoints": [
     {{ range .endpoint.public_group}}
    {
      "endpoint": "{{ .endpoint }}",
      "headers_to_pass": ["*"],
      "querystring_params":["*"],
      "output_encoding": "no-op",
      "method": "{{ .method }}",
      "backend": [
        {
          "host": ["{{ .host }}"],
          "url_pattern": "{{ .backend }}",
          "encoding": "no-op"
        }
      ]
    },
    {{ end }}
     {{ range .endpoint.public_group_auth}}
    {
       "endpoint": "{{ .endpoint }}",
       "extra_config": {{ include "authorization_admin.txt" }},
       "headers_to_pass": ["*"],
       "querystring_params":["*"],
       "output_encoding": "no-op",
       "method": "{{ .method }}",
       "backend": [
             {
           "host": ["{{ .host }}"],
           "url_pattern": "{{ .backend }}",
           "encoding": "no-op"
            }
            ]
     },
   {{ end }}
     {}
  ]
}
